# ‚ö° ZEUSNET: Wi‚ÄëFi Recon & Pentest Intelligence Node

**Hybrid ESP32 + PC Tactical Framework for Cyber‚ÄëNetwork Diagnostics**

> ZeusNet is an advanced, modular Wi‚ÄëFi surveillance and penetration testing suite. Powered by a USB‚Äëtethered ESP32 and a high‚Äëperformance PC (RTX2080 Super + i7‚Äë11700KF), it merges real‚Äëtime signal analytics, device tracking, and AI‚Äëpowered anomaly detection into a single unified toolkit.

## üîß Features

| Feature                      | Description                                      |
|-----------------------------|--------------------------------------------------|
| üåê Captive Portal trap       | ESP32-hosted login splash for phishing emulation |
| üì° MAC-based device tracking | Tracks known devices across time/geolocation     |
| üß† AI anomaly detection      | Predicts unusual signal behavior with LSTM       |
| üïµÔ∏è Rogue AP detection       | Flags SSID duplicates with different BSSIDs      |
| üìÅ Auto backups              | Daily JSON/CSV dump of scan logs                 |
| üìä Export to CSV/Excel       | Export tables directly from the GTK UI             |
| üî• Deauth & AP cloning       | Enabled via TL‚ÄëWN722N NIC in aggressive mode     |
| üß™ TL‚ÄëWN722N automation      | Controlled packet injection, handshake captures  |
| üó∫Ô∏è Heatmap dashboard         | Leaflet-powered map view in GTK UI |
| üéõÔ∏è In-app pentest controls  | Toggle mode and launch attacks via UI |
| üìú Advanced network list     | Filter scans by SSID or auth mode |
| üìà Signal charts             | Top RSSI graph in Dashboard tab |

## üß† Architecture

```text
ESP32 (Spectral Scanner / Captive Portal)
  ‚Æï USB Serial
      ‚Æï FastAPI WarCore (Python 3.10+, PyTorch, Scapy, SQLite)
        ‚Æï MQTT / WebSocket Bus
          ‚Æï GTK Frontend + Dashboards
          ‚Æï Optional: TL-WN722N (Monitor / Injection)
````

## üöÄ Quick Start

### Backend (FastAPI)

```bash
cd backend
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
ZEUSNET_ENV=dev uvicorn main:app --reload
# Tables are created automatically on first run
```

### Frontend (GTK)

```bash
python -m frontend.main
```

### Web UI (React)

```bash
cd webui
npm install
npm run dev
```

### Cross-Platform Docker MQTT

To avoid installing Mosquitto manually, run it via Docker:

```bash
docker compose up -d backend mqtt
```

This spins up the FastAPI backend in a lightweight container along with
Mosquitto. See `docs/setup.md` for full setup instructions.

To run the stack locally without Docker Compose, set `ZEUSNET_ENV=dev` and
execute `start-zeusnet.sh` (or `.bat` on Windows).

### GTK Desktop UI

For a native desktop view with tabs for networks, dashboards and map,
run the GTK app:

```bash
python -m frontend.main
```

This requires the `PyGObject` package built with GTK **4**.

The window now shows a network table with filters, attack panel, a
dashboard graph of top RSSI values and a heatmap tab. Controls let you
change scan interval, toggle scanning, switch modes or select the serial
port. A status bar reports the last successful update or any errors.
The attack tab now includes a dropdown for selecting the type of attack
before launching.

### Auto Start with systemd (Linux)

For persistent operation, install the provided service file:

```bash
sudo cp systemd/zeusnet-serial.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable zeusnet-serial
sudo systemctl start zeusnet-serial
```

The service assumes ZeusNet is installed under `/opt/zeusnet` and reads
environment variables from `/opt/zeusnet/.env`. It caches the last detected
serial port under `~/.config/zeusnet/last_serial`.
### Flash ESP32

```bash
arduino-cli compile -b esp32:esp32:esp32 esp32/zeusnet_esp32.ino
arduino-cli upload -p /dev/ttyUSB0 -b esp32:esp32:esp32
```

## üß¨ Serial Command Reference

| Code   | Direction | Purpose                        |
| ------ | --------- | ------------------------------ |
| `0x01` | PC ‚Üí ESP  | Set config (interval, channel) |
| `0x02` | PC ‚Üí ESP  | Switch to fake AP mode         |
| `0x10` | ESP ‚Üí PC  | Send scan list (SSID/RSSI)     |
| `0x12` | ESP ‚Üí PC  | Captive form POST              |
| `0x20` | PC ‚Üí ESP  | Reboot ESP32                   |

## üìÇ Folder Structure

```bash
ZeusNet/
‚îú‚îÄ‚îÄ esp32/                # ESP32 .ino sketches
‚îú‚îÄ‚îÄ backend/              # FastAPI core
‚îÇ   ‚îú‚îÄ‚îÄ api/              # Scan, device, export endpoints
‚îÇ   ‚îú‚îÄ‚îÄ alerts/           # Anomaly detection, MAC tracker
‚îÇ   ‚îî‚îÄ‚îÄ c2/               # Command bus
‚îú‚îÄ‚îÄ frontend/             # GTK UI
‚îÇ   ‚îú‚îÄ‚îÄ main.py           # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ app.py            # GTK application class
‚îÇ   ‚îú‚îÄ‚îÄ views/            # UI views (tabs)
‚îÇ   ‚îú‚îÄ‚îÄ widgets/          # Reusable components
‚îÇ   ‚îú‚îÄ‚îÄ services/         # API clients & business logic
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # Helpers (logging, async)
‚îú‚îÄ‚îÄ webui/                # React web interface
‚îî‚îÄ‚îÄ requirements.txt      # Python dependencies
```

### Developer Guide

Run the GTK frontend via:

```bash
python -m frontend.main
```

The frontend modules follow a separation-of-concerns layout with views,
services and widgets. See `frontend/main.py` for the entry point.

## ‚ö†Ô∏è Mode Switching

Copy `.env.example` to `.env` to toggle behavior:

```env
ZEUSNET_MODE=SAFE
# Change to AGGRESSIVE to unlock full pentest features
```

> **SAFE Mode** disables any packet injection or spoofing.
> **AGGRESSIVE Mode** activates deauth, rogue AP, and swarm tactics (for legal use only).

### Environment Variables

| Variable      | Purpose                                | Default |
|---------------|----------------------------------------|---------|
| `RETRY_LIMIT` | Serial read errors before reconnecting | `3`     |

Call `GET /api/settings` to view mode, serial port and watchdog status. Use
`POST /api/settings` with fields like `{"mode": "AGGRESSIVE"}`,
`{"serial_port": "/dev/ttyUSB0"}` or `{"watchdog": true}` to update them
at runtime.

## üõ∞Ô∏è TL-WN722N Tools

| Tool                | Role                         |
| ------------------- | ---------------------------- |
| `aircrack-ng`       | Handshake harvesting         |
| `hostapd + dnsmasq` | Rogue AP with captive portal |
| `hcxtools`          | PMKID capture                |
| `Scapy`             | Frame injection engine       |

Use via API call:

```http
POST /api/nic/attack
{
  "mode": "deauth",
  "target": "AA:BB:CC:DD:EE:FF",
  "channel": 6
}
```
Additional modes such as `survey` and `jam` provide blue‚Äëteam defensive actions.

## üóÉÔ∏è Backup Job (Linux crontab)

```cron
0 3 * * * /usr/bin/python3 /srv/zeusnet/backend/export/backup.py
```

Creates daily backup in `/backups/net_scan_YYYYMMDD.csv.gz`

## üóÑÔ∏è Data Migration

`zeusnet.db`, `backend.log` and `frontend.log` are no longer tracked in Git. To restore a previous database snapshot, extract it from an earlier commit:

```bash
git show <commit-hash>:zeusnet.db > zeusnet.db.old
```

Import or archive the file as needed before upgrading.

## üè≠ Production Deployment

For stable, long-running operation install dependencies and launch Uvicorn
without autoreload:

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
docker compose up -d mqtt
uvicorn backend.main:app --host 0.0.0.0 --port 8000 --workers 2
```

The included systemd unit can be adjusted to your installation directory
(default `/opt/zeusnet`):

```bash
sudo cp systemd/zeusnet-serial.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable zeusnet-serial
sudo systemctl start zeusnet-serial
```

## üßô AI Model (Optional)

Phase 2+ enables LSTM anomaly detection on RSSI trends.

```python
from torch import nn
class RSSIPredictor(nn.Module):
    ...
```

Flags dropouts, rogue clones, new MACs. Run on GPU if available.

## üìú License

MIT for tools. Aggressive modules must comply with **your local laws**. This tool is for **education and authorized testing** only.

> "Observe silently. Analyze ruthlessly. Dominate ethically."
> ‚Äî *ZeusNet WarCore, Operational Directive*


